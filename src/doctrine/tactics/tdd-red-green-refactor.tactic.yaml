schema_version: "1.0"
id: tdd-red-green-refactor
name: Test Driven Development (TDD)
purpose: Enforce short, verifiable coding loops that improve design while keeping behavior safe.
steps:
  - title: Red
    description: Write the smallest failing automated test that expresses one behavior increment.
    examples:
      - "Add one unit test for an unsupported branch and verify it fails before production edits."
  - title: Green
    description: Implement only the minimum production code needed to satisfy the new failing test.
    examples:
      - "Return the simplest valid value and avoid premature abstractions."
  - title: Refactor
    description: Improve production code structure and naming while keeping all tests green.
    examples:
      - "Extract duplicated branch logic into a helper after tests pass."
  - title: Refactor guardrails
    description: During refactoring, do not alter test behavior, assertions, or intent to force green results.
    examples:
      - "If tests fail during refactor, revert the production change and retry in smaller steps."
  - title: Maintain fast feedback
    description: Keep cycle time in minutes with local automation and fail fast in CI.
    examples:
      - "Run watch mode locally and block merge when new code has no corresponding tests."
  - title: Handle constraints explicitly
    description: When strict TDD cannot be applied, add safety nets and document impediments for remediation.
    examples:
      - "Create characterization tests around legacy tangles before deeper structural changes."
