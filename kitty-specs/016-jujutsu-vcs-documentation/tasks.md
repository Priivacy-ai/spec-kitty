# Work Packages: Jujutsu VCS Documentation

**Inputs**: Design documents from `/kitty-specs/016-jujutsu-vcs-documentation/`
**Prerequisites**: plan.md (complete), spec.md (complete), research.md (complete)

**Tests**: Not required for this documentation feature.

**Organization**: Fine-grained subtasks (`Txxx`) roll up into work packages (`WPxx`). Each work package is independently deliverable and testable.

**Prompt Files**: Each work package references a matching prompt file in `/tasks/` generated by `/spec-kitty.tasks`. Lane status is stored in YAML frontmatter (`lane: planned|doing|for_review|done`).

## Subtask Format: `[Txxx] [P?] Description`
- **[P]** indicates the subtask can proceed in parallel (different files/components).
- Include precise file paths.

## Path Conventions
- Documentation lives in `docs/` with Divio 4-type structure
- All paths relative to repo root

---

## Work Package WP01: Setup & TOC Update (Priority: P0)

**Goal**: Update table of contents with new jj documentation pages, establishing navigation structure.
**Independent Test**: toc.yml includes all 6 new page entries and is valid YAML.
**Prompt**: `/tasks/WP01-setup-toc-update.md`

### Included Subtasks
- [x] T001 Update `docs/toc.yml` to add new tutorial entry (jujutsu-workflow.md)
- [x] T002 Update `docs/toc.yml` to add new how-to entries (sync-workspaces.md, handle-conflicts-jj.md, use-operation-history.md)
- [x] T003 Update `docs/toc.yml` to add new explanation entries (jujutsu-for-multi-agent.md, auto-rebase-and-conflicts.md)

### Implementation Notes
- Add entries in appropriate sections maintaining alphabetical or logical order
- Ensure YAML syntax is valid
- New entries should point to files that will be created in subsequent WPs

### Parallel Opportunities
- None - single file update

### Dependencies
- None (starting package)

### Risks & Mitigations
- Invalid YAML breaks DocFX build ‚Üí validate with YAML linter before commit

---

## Work Package WP02: Reference Documentation (Priority: P1) üéØ MVP

**Goal**: Add complete reference documentation for new CLI commands (`sync`, `ops`).
**Independent Test**: User can find accurate documentation for `spec-kitty sync` and `spec-kitty ops` commands with all flags and examples.
**Prompt**: `/tasks/WP02-reference-documentation.md`

### Included Subtasks
- [x] T004 Add `spec-kitty sync` command reference to `docs/reference/cli-commands.md`
- [x] T005 Add `spec-kitty ops` command group reference to `docs/reference/cli-commands.md`
- [x] T006 Add `spec-kitty ops log` subcommand reference with options and examples
- [x] T007 Add `spec-kitty ops undo` subcommand reference with jj-only note
- [x] T008 Add `spec-kitty ops restore` subcommand reference with jj-only note
- [x] T009 Document `--vcs` flag in `spec-kitty init` section
- [x] T010 [P] Update `docs/reference/file-structure.md` to document `.jj/` directory
- [x] T011 [P] Update `docs/reference/configuration.md` with vcs config section

### Implementation Notes
- Use research.md for verified CLI help output
- Include backend difference callouts (jj vs git behavior)
- Add examples for each command
- Cross-reference to explanation articles

### Parallel Opportunities
- T010 (file-structure.md) and T011 (configuration.md) can proceed in parallel

### Dependencies
- WP01 (toc.yml must have entries for cross-references to work)

### Risks & Mitigations
- CLI output may change ‚Üí document against spec-kitty 0.12.0+

---

## Work Package WP03: Jujutsu Workflow Tutorial (Priority: P1) üéØ MVP

**Goal**: Create comprehensive tutorial for jj workflow from project init through merge.
**Independent Test**: A user with jj installed can follow the tutorial end-to-end and complete a feature using jj.
**Prompt**: `/tasks/WP03-jujutsu-workflow-tutorial.md`

### Included Subtasks
- [x] T012 Create `docs/tutorials/jujutsu-workflow.md` with Divio tutorial structure
- [x] T013 Write prerequisites section (jj installation, project setup)
- [x] T014 Write init section showing `spec-kitty init` with jj detection
- [x] T015 Write workspace creation section with `spec-kitty implement`
- [x] T016 Write sync section demonstrating auto-rebase
- [x] T017 Write conflict handling section showing non-blocking conflicts
- [x] T018 Write merge completion section
- [x] T019 Add cross-references to related how-tos and explanations

### Implementation Notes
- Follow Divio tutorial guidelines: learning-oriented, step-by-step
- Use realistic example (creating a simple feature)
- Include command output examples
- Highlight differences from git workflow

### Parallel Opportunities
- None - sections must be written in sequence

### Dependencies
- WP01 (toc.yml entry)

### Risks & Mitigations
- Tutorial complexity ‚Üí test with fresh user perspective

---

## Work Package WP04: New How-To Guides (Priority: P1) üéØ MVP

**Goal**: Create task-oriented how-to guides for sync, conflicts, and operation history.
**Independent Test**: User can accomplish specific tasks (sync workspace, handle conflicts, undo operation) by following each guide.
**Prompt**: `/tasks/WP04-new-how-to-guides.md`

### Included Subtasks
- [x] T020 [P] Create `docs/how-to/sync-workspaces.md` - syncing workspace with upstream
- [x] T021 [P] Create `docs/how-to/handle-conflicts-jj.md` - non-blocking conflict handling
- [x] T022 [P] Create `docs/how-to/use-operation-history.md` - using ops log/undo/restore

### Implementation Notes
- Follow Divio how-to guidelines: task-oriented, problem-solving
- Each guide should be completable in 5-10 minutes
- Include prerequisites, steps, and verification
- Add troubleshooting section for common issues

### Parallel Opportunities
- All three guides can be written in parallel (different files)

### Dependencies
- WP01 (toc.yml entries)
- WP02 (command reference for cross-links)

### Risks & Mitigations
- Guides may overlap ‚Üí ensure clear scope boundaries

---

## Work Package WP05: Integration Updates (Priority: P2)

**Goal**: Update existing documentation to integrate jj mentions alongside git content.
**Independent Test**: Existing users reading familiar docs discover jj is now supported without needing to find new pages.
**Prompt**: `/tasks/WP05-integration-updates.md`

### Included Subtasks
- [x] T023 [P] Update `docs/tutorials/getting-started.md` with jj installation recommendation
- [x] T024 [P] Update `docs/tutorials/your-first-feature.md` to mention VCS abstraction
- [x] T025 [P] Update `docs/tutorials/multi-agent-workflow.md` with jj auto-rebase benefits
- [x] T026 [P] Update `docs/how-to/install-spec-kitty.md` with jj installation section
- [x] T027 [P] Update `docs/how-to/implement-work-package.md` with jj workspace note
- [x] T028 [P] Update `docs/how-to/parallel-development.md` with jj benefits
- [x] T029 [P] Update `docs/how-to/handle-dependencies.md` with sync command mention
- [x] T030 [P] Update `docs/explanation/workspace-per-wp.md` with jj workspace info
- [x] T031 [P] Update `docs/explanation/git-worktrees.md` to compare with jj workspaces

### Implementation Notes
- Use callout boxes for jj-specific information
- Keep updates minimal but discoverable
- Link to dedicated jj content for deep dives
- Maintain existing content flow

### Parallel Opportunities
- All updates can proceed in parallel (different files)

### Dependencies
- WP02-04 (need dedicated content to link to)

### Risks & Mitigations
- Overwhelming existing docs ‚Üí keep jj additions concise

---

## Work Package WP06: New Explanations & Validation (Priority: P2)

**Goal**: Create conceptual explanations and validate entire documentation build.
**Independent Test**: DocFX builds without errors, all links resolve, users can understand why jj is preferred.
**Prompt**: `/tasks/WP06-explanations-validation.md`

### Included Subtasks
- [x] T032 [P] Create `docs/explanation/jujutsu-for-multi-agent.md` - why jj for multi-agent
- [x] T033 [P] Create `docs/explanation/auto-rebase-and-conflicts.md` - how jj auto-rebase works
- [x] T034 Add cross-references between all new and updated pages
- [x] T035 Test DocFX build locally (`docfx docs/docfx.json`)
- [x] T036 Verify all internal links resolve (no 404s)
- [x] T037 Verify both "jj" and "jujutsu" search terms appear in content

### Implementation Notes
- Follow Divio explanation guidelines: understanding-oriented, conceptual
- Include diagrams if helpful (mermaid supported)
- Cross-reference to tutorials and how-tos
- Run link checker before completion

### Parallel Opportunities
- T032 and T033 can proceed in parallel
- T035-T037 must wait for all content complete

### Dependencies
- WP01-05 (all documentation must be in place for validation)

### Risks & Mitigations
- DocFX build fails ‚Üí test incrementally during earlier WPs

---

## Dependency & Execution Summary

```
WP01 (Setup) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
     ‚îÇ                                                 ‚îÇ
     ‚îú‚îÄ‚îÄ WP02 (Reference) ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                        ‚îÇ
     ‚îÇ                        ‚îÇ                        ‚îÇ
     ‚îú‚îÄ‚îÄ WP03 (Tutorial) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ WP05 (Integration) ‚îÄ‚îÄ‚î§
     ‚îÇ                        ‚îÇ                        ‚îÇ
     ‚îî‚îÄ‚îÄ WP04 (How-Tos) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                        ‚îÇ
                                                       ‚îÇ
                              WP06 (Explanations & Validation)
```

- **Sequence**: WP01 ‚Üí WP02/WP03/WP04 (parallel) ‚Üí WP05 ‚Üí WP06
- **Parallelization**: WP02, WP03, WP04 can run in parallel after WP01
- **MVP Scope**: WP01 + WP02 + WP03 + WP04 constitute minimum viable documentation

---

## Subtask Index (Reference)

| Subtask ID | Summary | Work Package | Priority | Parallel? |
|------------|---------|--------------|----------|-----------|
| T001 | Add tutorial entry to toc.yml | WP01 | P0 | No |
| T002 | Add how-to entries to toc.yml | WP01 | P0 | No |
| T003 | Add explanation entries to toc.yml | WP01 | P0 | No |
| T004 | Add sync command to cli-commands.md | WP02 | P1 | No |
| T005 | Add ops command group to cli-commands.md | WP02 | P1 | No |
| T006 | Add ops log subcommand reference | WP02 | P1 | No |
| T007 | Add ops undo subcommand reference | WP02 | P1 | No |
| T008 | Add ops restore subcommand reference | WP02 | P1 | No |
| T009 | Document --vcs flag in init section | WP02 | P1 | No |
| T010 | Update file-structure.md for .jj/ | WP02 | P1 | Yes |
| T011 | Update configuration.md with vcs section | WP02 | P1 | Yes |
| T012 | Create jujutsu-workflow.md | WP03 | P1 | No |
| T013 | Write prerequisites section | WP03 | P1 | No |
| T014 | Write init section | WP03 | P1 | No |
| T015 | Write workspace creation section | WP03 | P1 | No |
| T016 | Write sync section | WP03 | P1 | No |
| T017 | Write conflict handling section | WP03 | P1 | No |
| T018 | Write merge completion section | WP03 | P1 | No |
| T019 | Add cross-references to tutorial | WP03 | P1 | No |
| T020 | Create sync-workspaces.md | WP04 | P1 | Yes |
| T021 | Create handle-conflicts-jj.md | WP04 | P1 | Yes |
| T022 | Create use-operation-history.md | WP04 | P1 | Yes |
| T023 | Update getting-started.md | WP05 | P2 | Yes |
| T024 | Update your-first-feature.md | WP05 | P2 | Yes |
| T025 | Update multi-agent-workflow.md | WP05 | P2 | Yes |
| T026 | Update install-spec-kitty.md | WP05 | P2 | Yes |
| T027 | Update implement-work-package.md | WP05 | P2 | Yes |
| T028 | Update parallel-development.md | WP05 | P2 | Yes |
| T029 | Update handle-dependencies.md | WP05 | P2 | Yes |
| T030 | Update workspace-per-wp.md | WP05 | P2 | Yes |
| T031 | Update git-worktrees.md | WP05 | P2 | Yes |
| T032 | Create jujutsu-for-multi-agent.md | WP06 | P2 | Yes |
| T033 | Create auto-rebase-and-conflicts.md | WP06 | P2 | Yes |
| T034 | Add cross-references to all pages | WP06 | P2 | No |
| T035 | Test DocFX build locally | WP06 | P2 | No |
| T036 | Verify all internal links | WP06 | P2 | No |
| T037 | Verify search terms coverage | WP06 | P2 | No |
