# Work Packages: Fix and Test Dashboard

**Inputs**: Design documents from `/kitty-specs/013-fix-and-test-dashboard/`
**Prerequisites**: plan.md (required), spec.md (user stories), quickstart.md

**Tests**: This feature IS about adding tests - test tasks are the primary deliverable.

**Organization**: Fine-grained subtasks (`Txxx`) roll up into work packages (`WPxx`). Each work package must be independently deliverable and testable.

**Prompt Files**: Each work package references a matching prompt file in `/tasks/` generated by `/spec-kitty.tasks`.

## Subtask Format: `[Txxx] [P?] Description`
- **[P]** indicates the subtask can proceed in parallel (different files/components).
- Include precise file paths or modules.

---

## Work Package WP01: Add Scanner Format Tests (Priority: P1) ðŸŽ¯ MVP

**Goal**: Add test coverage for both new (frontmatter-based) and legacy (directory-based) lane formats in the dashboard scanner.
**Independent Test**: Run `pytest tests/test_dashboard/test_scanner.py -v` and verify all tests pass including new format tests.
**Prompt**: `/tasks/WP01-add-scanner-format-tests.md`

### Included Subtasks
- [x] T001 Create `_create_new_format_feature()` fixture helper in `tests/test_dashboard/test_scanner.py`
- [x] T002 Add `test_scan_new_format_feature_detects_lanes` test
- [x] T003 Add `test_scan_new_format_default_lane` test (missing lane defaults to "planned")
- [x] T004 Add `test_scan_new_format_multiple_lanes` test (tasks across all 4 lanes)
- [x] T005 Add `test_is_legacy_format_detects_new_format` test
- [x] T006 Add `test_is_legacy_format_detects_legacy_format` test
- [x] T007 Run full dashboard test suite to verify no regressions

### Implementation Notes
1. Read existing `_create_feature()` fixture to understand the pattern
2. Create parallel `_create_new_format_feature()` that uses flat `tasks/` directory
3. Add tests that exercise `scan_feature_kanban()` and `is_legacy_format()`
4. Ensure existing tests continue passing

### Parallel Opportunities
- T002-T006 can be written in parallel once T001 is complete (all use same fixture)

### Dependencies
- None (this is the only work package)

### Risks & Mitigations
- **Risk**: Existing tests may break if fixture pattern changes
- **Mitigation**: Keep existing `_create_feature()` unchanged; add new fixture alongside it

---

## Dependency & Execution Summary

- **Sequence**: WP01 is the only work package (simple feature)
- **Parallelization**: Subtasks T002-T006 can be parallelized after T001
- **MVP Scope**: WP01 is the complete feature

---

## Subtask Index (Reference)

| Subtask ID | Summary | Work Package | Priority | Parallel? |
|------------|---------|--------------|----------|-----------|
| T001       | Create new format fixture | WP01 | P1 | No |
| T002       | Test new format lane detection | WP01 | P1 | Yes |
| T003       | Test default lane behavior | WP01 | P1 | Yes |
| T004       | Test multiple lanes | WP01 | P1 | Yes |
| T005       | Test is_legacy_format (new) | WP01 | P1 | Yes |
| T006       | Test is_legacy_format (legacy) | WP01 | P1 | Yes |
| T007       | Regression verification | WP01 | P1 | No |
